#include <stdio.h>
#include <stdlib.h>
#include "Player_parametrs.h"
#include "text_blocks.h"
#include "sys_funcs.h"


void class_pick_text(Parametrs *player) {
    printf("Приветствую тебя, %s!\n", player->name);
    printf("Судьба требует выбора. Кем ты станешь в этом мире?\n\n");

    printf("  1) Воин\n");
    printf("     \"Почему я не умираю? Потому что смерть боится, что я начну драку — даже в аду.\"\n");
    printf("     Здоровье: 200   Сила: 5   Грузоподьемность: 3\n\n");

    printf("  2) Охотник\n");
    printf("     \"Ты не услышишь шагов. Не увидишь тени. Успеешь только пожалеть, что вышел сегодня из дома.\"\n");
    printf("     Здоровье: 100    Сила: 10   Грузоподьемность: 5\n\n");

    printf("  3) Алхимик\n");
    printf("     \"Мой мозг — оружие. Моя колба — арсенал. Смерть врагов — побочный эффект.\"\n");
    printf("     Здоровье: 150    Сила: 8   Грузоподьемность: 4\n\n");

    printf("Твой путь (1/2/3): ");
}


void entering_dungeons_text(Parametrs *player){
    printf("Ты проснулся в пещере, освещенной единственным факелом\n");
    clear_input();
    switch(player->hero) {
        case 0: 
            printf("«Cудя по головной боли — это не дракон меня сюда занёс. \nЕсли бы мне сказали, что ‘последняя чаша за храбрость’ — это билет в подземелье, я бы... поднял её дважды. Обожаю приключения!»");
            break;
        case 1: 
            printf("«Следы... ведут по кругу. Или это я по кругу шёл?.. Ах да — тот ‘лесной дух с огненной гривой’... который кричал ‘не догонишь!’ и бежал к пещере.\n");
            printf("Теперь понятно — дух был в плаще, с факелом, и, судя по запаху — с кувшином вина. Охота удалась. Жаль, добыча — я сам.»");
            break;
        case 2: 
            printf("«А-а-а! Это же идеальное место для наблюдений! Влажность — 80%%, освещение — драматичное, акустика — для монологов!.. О, грибы светятся? Прекрасно — значит, я не провалился в пещеру, я прибыл в лабораторию!\n");
            printf("Запись: ‘Эксперимент №113: зелье “Прыжок совы” + “Слёзы бармена” = телепорт в карстовую полость’. Эффект: частично предсказуем. Я — жив. Пещера — тоже. Побочный эффект: отсутствие завтрака. Исправимо!»");
            break;
        default:
            printf("Я Котейка, помогитииииии.");
    }
    clear_input();
    printf("\n");
    printf("На скале написано: пройди 7 испытаний и сразись с боссом, чтобы выбраться.");
    clear_input();
    printf("\n");
    switch(player->hero){
        case 0: 
            printf("«Семь испытаний? Босс?.. Звучит как расписание на неделю. Отлично — я как раз размялся, пока спал на камнях.\n");
            printf("Главное — чтобы босс был честным: без ядов, ловушек и... особенно без тавернщиц с кувшинами. Те опаснее драконов. Вперёд — за славой, шрамами и, может, завтраком!»");
            break;
        case 1: 
            printf("«Семь испытаний... или семь ловушек? Босс — или тот, кто установил ловушки?.. Хм. Следы ведут дальше — свежие. Кто-то уже прошёл. Или... кто-то ждал. Ладно.\n");
            printf("Если это испытание — значит, есть и награда. А если награда — значит, есть и добыча. Пойдём. Но тихо. И с факелом пониже — мало ли что считает, что оно босс…»");
            break;
        case 2: 
            printf("«СЕМЬ ИСПЫТАНИЙ?! Великолепно! Это же экспериментальная дорожка! Босс — вероятно, финальный образец!.. Интересно, можно ли оптимизировать путь? Например, пройти испытания 3 и 5 одновременно? Или заменить босса на добровольца?\n");
            printf("О, а если я стану боссом? Тогда выход гарантирован — по закону симметрии! Запись: ‘Гипотеза №1: надпись — не инструкция, а реактив. Реагирует на глупость. Проверяю на себе.»");
            break;
        default:
            printf("Какие испытания, у меня лапкииииии.");
    }
    clear_input();
    printf("\n");
    printf("Герой уверенно пошел в единственный проход, все дальше уходя от начальной пещеры\n");
    clear_input();
    clear_screen();
}


void each_dungeon_text(int current_dungeon) {
    const char* atmospheres[] = {
        "Холодный ветерок пробегает по твоей шее, неся с собой запах сырой земли и гнили.",
        "Где-то вдалеке слышен глухой стук — будто капает вода... или что-то стучит когтями по камню.",
        "Тишина такая густая, что кажется, будто стены наблюдают за тобой.",
        "Слабый свет факела дрожит на стенах, отбрасывая странные тени, похожие на чьи-то силуэты."
    };
    int num_atmos = sizeof(atmospheres) / sizeof(atmospheres[0]);
    int rand_atmos = rand() % num_atmos;

    printf("%s\n", atmospheres[rand_atmos]);
    printf("На камне кровью написано: %d пещера из 9\n", current_dungeon);
    printf("Перед тобой — развилка. Две пещеры зияют во тьму, каждая шепчет свои обещания...\n");
    printf("\nЧто ты сделаешь?\n");
    printf("  [1] Пойти в левую пещеру\n");
    printf("  [2] Пойти в правую пещеру\n");
    printf("  [3] Открыть инвентарь\n");
    printf("  [4] Сохранить игру\n");
    printf("  [5] Загрузить сохранение\n");
    printf("\n> ");
}


void empty_dungeon_text(){//тут чет не так
    printf("Перед вами пустая пещера\n");
    // тут типо фразы героев разные
    clear_input();
    clear_screen();

}


void treasuries_dungeon_text(){
    printf("В этой пещере ничего нет, хотя... Присмотревшись, герой заметил что-то странное посреди пещеры\n");
    clear_input();
    printf("Это... Это ");
}


void mob_dungeon_text(){
    printf("О, скелетик. Давай повоюем\n\n");
    // по факту надо расписать для каждого персонажа
}


void end_of_base_dungeons(){
    printf("Вот и все 9 пещер позади, осталось только разобраться с боссом.");
    clear_input();
    printf("\nГерой вышел в проход, больше похожий на коридор замка, чем на пещеру\n");
    printf("\nВ конце коридора приоткрытая дверь, она так и манит к себе...\n\n");
    clear_input();
    printf("Перед входом в босс локацию");
}


void boss_dungeon_text(int *class){
    printf("\nГерой приоткрыл дверь и вошел в огромный зал, посреди которого стоит трон\n\n");
    printf("\"Ну здравствуй, путешественник. Знаешь, почему ты оказался здесь?\" - промолвил огромный скелет, воссидающий на троне.");
    clear_input();
    switch(*class){
        case 0:
            printf("\n\"Нет, да и знать особо не хочу. Давай сражаться!!!\" - проорал воин и кинулся в атаку");
            break;
        case 1:
            printf("\n\"Нет, но давай поговорим, я уверен, что мы сможем все решить мирно...\" - осторожно сказал охотник");
            clear_input();
            printf("\n\"Ну уж нет\" - рассмеявшись сказал король скелетов\n");
            printf("\n\"Ты убил меня во время охоты на того оленя, я тестировал новое зелье перемещения и попал под копыта твоей лошади,\n");
            printf("а ты даже не попытался мне помочь\" - сказал король.");
            clear_input();
            printf("\n\"Ну а теперь защищайся!\" - достав меч из ножен, прокричал скелет.");
            break;
        case 2:
            printf("\n\"БАТЯ???\" - удивленно выдохнул колдун.");
            clear_input();
            printf("\"Ты переместился в магазин за хлебом десять лет назад и больше я тебя не видел\" - вскрикнул  маг.");
            clear_input();
            printf("\n\"С тех пор, как я был твоим отцом, много что поменялось, Добрыня\" - грустно вздохнув, ответил скелет");
            clear_input();
            printf("\"А вот скелетики, которых ты убил по пути были мне как дети, и сейчас ты ответишь за это\" - грозно сказал король.");
            break;
        default:
            printf("\nМяу?");
            clear_input();
            printf("\n\"Иииии это абсолютно правильный ответ! Приз - бесплатный выход из пещер.\" - усмехаясь, сказал король.");
    }
    clear_input();
}


void end_of_phase_1_text(){
    printf("Выпустил двх преспешников скелетов.\n");
}


void phase_2_text(){
    printf("Все преспешники короля повержены, осталось только добить его.\n");
    printf("Пока появилась короткая передышка, можно залатать свои раны\n");
}


void good_end_text(){
    printf("Ты вышел на свет и вдохнул полной грудью свежий воздух");
    clear_input();
}


void bad_end_text(){
    printf("Ты пал смерьтю храбрых...");
    clear_input();
}
